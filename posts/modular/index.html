<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Punk Domains protocol is modular. Let's see how it works! | Punk Domains Blog</title><meta name=keywords content><meta name=description content="Punk Domains protocol was built with modularity in mind, which makes it very flexible and allows for different parts of the module to be owned by different owners (for example, TLDs or even factories can be owned by a different owners).
Let&rsquo;s take a look at the graphical representation of the protocol and then dive into different parts.
TLD factories We&rsquo;ll start with the main component of the Punk Domains architecture: a TLD factory."><meta name=author content><link rel=canonical href=https://blog.punk.domains/posts/modular/><link crossorigin=anonymous href=/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.punk.domains/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.punk.domains/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.punk.domains/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.punk.domains/apple-touch-icon.png><link rel=mask-icon href=https://blog.punk.domains/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Punk Domains protocol is modular. Let's see how it works!"><meta property="og:description" content="Punk Domains protocol was built with modularity in mind, which makes it very flexible and allows for different parts of the module to be owned by different owners (for example, TLDs or even factories can be owned by a different owners).
Let&rsquo;s take a look at the graphical representation of the protocol and then dive into different parts.
TLD factories We&rsquo;ll start with the main component of the Punk Domains architecture: a TLD factory."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.punk.domains/posts/modular/"><meta property="og:image" content="https://blog.punk.domains/img/modular-design-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-11T14:42:22+02:00"><meta property="article:modified_time" content="2022-05-11T14:42:22+02:00"><meta property="og:site_name" content="Punk Domains Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.punk.domains/img/modular-design-cover.png"><meta name=twitter:title content="Punk Domains protocol is modular. Let's see how it works!"><meta name=twitter:description content="Punk Domains protocol was built with modularity in mind, which makes it very flexible and allows for different parts of the module to be owned by different owners (for example, TLDs or even factories can be owned by a different owners).
Let&rsquo;s take a look at the graphical representation of the protocol and then dive into different parts.
TLD factories We&rsquo;ll start with the main component of the Punk Domains architecture: a TLD factory."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.punk.domains/posts/"},{"@type":"ListItem","position":2,"name":"Punk Domains protocol is modular. Let's see how it works!","item":"https://blog.punk.domains/posts/modular/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Punk Domains protocol is modular. Let's see how it works!","name":"Punk Domains protocol is modular. Let\u0027s see how it works!","description":"Punk Domains protocol was built with modularity in mind, which makes it very flexible and allows for different parts of the module to be owned by different owners (for example, TLDs or even factories can be owned by a different owners).\nLet\u0026rsquo;s take a look at the graphical representation of the protocol and then dive into different parts.\nTLD factories We\u0026rsquo;ll start with the main component of the Punk Domains architecture: a TLD factory.","keywords":[],"articleBody":"Punk Domains protocol was built with modularity in mind, which makes it very flexible and allows for different parts of the module to be owned by different owners (for example, TLDs or even factories can be owned by a different owners).\nLet’s take a look at the graphical representation of the protocol and then dive into different parts.\nTLD factories We’ll start with the main component of the Punk Domains architecture: a TLD factory.\nA TLD factory is a smart contract through which you can create new top-level domains (or TLDs, such as .web3, .ape, op, .etc). Each TLD is a separate smart contract, which is only possible because factory contracts have this “magical” ability to create new contracts on-chain.\nTLD contracts do not need to be created and deployed manually by any person. A new TLD contract is created dynamically on-chain, when the appropriate method in the factory contract is called (createTld method or ownerCreateTld method).\nWhy are there multiple factories? Each factory holds a template for a TLD that can be created through it. These TLD templates must follow the same basic structure (the same set of base methods), but can implement some methods differently or even have some special additional methods.\nFor example, one TLD template can limit TLDs to the same metadata image background, while another template (from a different factory) can allow for custom domain images. Factories and templates could also differ on which business model they allow (renewable vs. one-time purchase) and in many other ways.\nHow many different types of TLD factories there are? Currently we have two factories (Standard and Flexi), but we expect many more in the future. There’s no limit on how many factories can be used in the Punk Domains protocol.\nEven though existing factories right now are owned by the Punk Domains governance, they can be owned by different entities in the future. The protocol allows that and it works perfectly fine.\nThe Forbidden TLDs contract Because there are multiple factories that can produce new top-level domains, it’s important that they avoid collisions.\nIn order to coordinate, there’s a contract called PunkForbiddenTlds which holds a list of already created top-level domains. Factories, of course, are not allowed to create new TLDs with the same name (hence, the “forbidden TLDs list”).\nThe Forbidden TLDs list does not include only TLDs from the Punk Domains ecosystem, but also TLDs created by other protocols such as .eth by ENS, and TLDs owned by Unstoppable Domains.\nThe Resolver contract Resolving a domain means querying an address (and other data) associated with this domain. There’s also a reverse process (called reverse-resolver) where you try to find domain(s) associated with an address.\nEach TLD contract has a resolver and a reverse-resolver implemented by default, as methods in the TLD contract itself.\nBut because there are so many TLD contracts, it’s also good to have a single smart contract that can resolve all TLDs on the given chain. This contract is called PunkResolver, and is not crucial for the system to work, but it is a nice shortcut.\nInstead of having to find and/or store all TLD contract addresses, you just need to know one contract address (the resolver’s address) and always resolve domains through that contract.\n","wordCount":"542","inLanguage":"en","datePublished":"2022-05-11T14:42:22+02:00","dateModified":"2022-05-11T14:42:22+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.punk.domains/posts/modular/"},"publisher":{"@type":"Organization","name":"Punk Domains Blog","logo":{"@type":"ImageObject","url":"https://blog.punk.domains/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.punk.domains/ accesskey=h title="Punk Domains Blog (Alt + H)">Punk Domains Blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Punk Domains protocol is modular. Let's see how it works!</h1><div class=post-meta><span title='2022-05-11 14:42:22 +0200 +0200'>May 11, 2022</span></div></header><div class=post-content><p>Punk Domains protocol was built with modularity in mind, which makes it <strong>very flexible</strong> and allows for different parts of the module to be owned by different owners (for example, TLDs or even factories can be owned by a different owners).</p><p>Let&rsquo;s take a look at the graphical representation of the protocol and then dive into different parts.</p><p><img loading=lazy src=/img/modular-architecture-bg-white.svg alt></p><h2 id=tld-factories>TLD factories<a hidden class=anchor aria-hidden=true href=#tld-factories>#</a></h2><p>We&rsquo;ll start with the main component of the Punk Domains architecture: a TLD factory.</p><p>A TLD factory is a smart contract through which you can create new top-level domains (or TLDs, such as .web3, .ape, op, .etc). Each TLD is a separate smart contract, which is only possible because factory contracts have this &ldquo;magical&rdquo; ability to <strong>create new contracts on-chain</strong>.</p><p>TLD contracts do <strong>not</strong> need to be created and deployed manually by any person. A new TLD contract is created dynamically on-chain, when the appropriate method in the factory contract is called (<code>createTld</code> method or <code>ownerCreateTld</code> method).</p><h4 id=why-are-there-multiple-factories>Why are there multiple factories?<a hidden class=anchor aria-hidden=true href=#why-are-there-multiple-factories>#</a></h4><p>Each factory holds a <strong>template for a TLD</strong> that can be created through it. These TLD templates must follow the same basic structure (the same set of base methods), but can implement some methods differently or even have some special additional methods.</p><p>For example, one TLD template can limit TLDs to the same metadata image background, while another template (from a different factory) can allow for custom domain images. Factories and templates could also differ on which business model they allow (renewable vs. one-time purchase) and in many other ways.</p><h4 id=how-many-different-types-of-tld-factories-there-are>How many different types of TLD factories there are?<a hidden class=anchor aria-hidden=true href=#how-many-different-types-of-tld-factories-there-are>#</a></h4><p>Currently we have two factories (Standard and Flexi), but we expect many more in the future. There&rsquo;s <strong>no limit</strong> on how many factories can be used in the Punk Domains protocol.</p><p>Even though existing factories right now are owned by the Punk Domains governance, they can be owned by different entities in the future. The protocol allows that and it works perfectly fine.</p><h2 id=the-forbidden-tlds-contract>The Forbidden TLDs contract<a hidden class=anchor aria-hidden=true href=#the-forbidden-tlds-contract>#</a></h2><p>Because there are multiple factories that can produce new top-level domains, it&rsquo;s important that they <strong>avoid collisions</strong>.</p><p>In order to coordinate, there&rsquo;s a contract called <code>PunkForbiddenTlds</code> which holds a <strong>list of already created</strong> top-level domains. Factories, of course, are not allowed to create new TLDs with the same name (hence, the &ldquo;forbidden TLDs list&rdquo;).</p><p>The Forbidden TLDs list does not include only TLDs from the Punk Domains ecosystem, but <strong>also TLDs created by other protocols</strong> such as <code>.eth</code> by ENS, and TLDs owned by Unstoppable Domains.</p><h2 id=the-resolver-contract>The Resolver contract<a hidden class=anchor aria-hidden=true href=#the-resolver-contract>#</a></h2><p>Resolving a domain means querying an address (and other data) associated with this domain. There&rsquo;s also a reverse process (called reverse-resolver) where you try to find domain(s) associated with an address.</p><p>Each TLD contract has a resolver and a reverse-resolver implemented by default, as methods in the TLD contract itself.</p><p>But because there are so many TLD contracts, it&rsquo;s also good to have <strong>a single smart contract</strong> that can <strong>resolve all TLDs</strong> on the given chain. This contract is called <code>PunkResolver</code>, and is not crucial for the system to work, but it is a nice shortcut.</p><p>Instead of having to find and/or store all TLD contract addresses, you just need to know one contract address (the resolver&rsquo;s address) and always resolve domains through that contract.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://blog.punk.domains/>Punk Domains Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>